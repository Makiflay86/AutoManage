{"version":3,"sources":["cars_edit.js"],"names":["mainImgInput","document","querySelector","fileStatus","getElementById","clearImgCheckbox","addEventListener","e","files","this","createObjectURL","mainItem","newImgUrl","thumbContainer","name","innerHTML","style","display","btnRemoveMain","checked","existingMainThumb","newThumb","createElement","id","className","setAttribute","value","selectedFiles","imageInput","previewContainer","reader","dataTransfer","DataTransfer","updateInputFiles","forEach","file","items","add","target","Array","from","push","FileReader","onload","event","div","onclick","filter","f","remove","appendChild","readAsDataURL","carGallery","el","classList","activeIdx","querySelectorAll","indexOf","targetThumb"],"mappings":"aAAA,IAAMA,aAAeC,SAASC,cAAc,wBACtCC,WAAaF,SAASG,eAAe,eADrCJ,cAAeC,SAASC,eAAc,iBACtCC,iBAAqBF,SAACG,eAAe,mBAErCC,cAGFL,aAAaM,iBAAiB,SAAU,SAAUC,GADlDP,GAAAA,KAAJQ,OAAkBC,KAAAD,MAAA,GAAA,CACdR,IAAaM,EAAAA,IAAiBI,gBAAUD,KAAaD,MAAA,IAC7CG,EAAmBH,SAAUJ,eAAA,YACvBQ,EAAgBF,SAAgBN,eAAtC,kBAEMS,WAAAA,UAAAA,6CAAAA,OAANJ,KAAAD,MAAA,GAAAM,MAEAX,WAAWY,UAAX,6BACAZ,cAAAa,MAAuBC,QAAA,QACvBC,mBAAAb,iBAAAc,SAAA,GAGAR,EAASI,UAATJ,aAAAA,OAAAC,EAAAD,0FAEA,IAAIS,EAAoBnB,SAASG,eAAe,aAC5CgB,GAAAA,EACAA,EAAwBR,IAAAA,EACxBQ,EAAwBH,MAAxBA,QAAA,YACG,CACGI,IAAQA,EAAYC,SAAAA,cAA1B,OACQD,EAAME,GAAA,YACNF,EAAOT,IAAAA,EACPS,EAACG,UAAY,iDACbH,EAASL,MAAA,iEACTK,EAACI,aAAa,iBAAkB,eAChCJ,EAACI,aAAa,mBAAtB,KACAZ,EAAuBQ,QAAvBA,OAMZH,eACAA,cAAcZ,iBAAiB,QAAS,WACpCN,aAAa0B,MAAb,GACIrB,mBAAkBA,iBAAiBc,SAAjB,GACtBhB,WAAWY,UAAXZ,4DACAA,WAAWqB,UAAY,4BACvBvB,SAASG,eAAe,YAAYW,UAApCd,kKACIA,SAASG,eAAe,eAAcH,SAASG,eAAe,aAAaY,MAAMC,QAAU,QAC/FR,KAAKO,MAAMC,QAAU,SAI7B,IAAIU,cAAgB,GACdC,WAAa3B,SAASG,eAAe,cACrCyB,iBAAmB5B,SAASG,eAAe,oBAkBzC0B,SAAAA,mBAdJ,IAAAC,EAAA,IAAAC,aAgBAC,cAAgBC,QAAA,SAAAC,GAAA,OAAAJ,EAAAK,MAAAC,IAAAF,KAlBpBP,WAAApB,MAAAuB,EAAAvB,MACIoB,WAAWtB,iBAAgBgC,SAAO9B,SAAlCD,GACcgC,MAAAC,KAAAL,EAAIG,OAAI9B,OAClBmB,QAAcc,SAAAA,GACRX,cAAaY,KAAAA,GAAnB,IAAMZ,EAAS,IAAIY,WACnBZ,EAAOa,OAAS,SAAUC,GAChBC,IAAM5C,EAAQA,SAACqB,cAArB,OACIE,EAAAA,UAAY,mBACZT,EAAAA,UAAAA,aAAAA,OAAJ6B,EAA6BA,OAAMN,OAA/BvB,uIACJ8B,EAAI3C,cAAc,eAAe4C,QAAU,WAAvC5C,cAAcyB,cAAlBoB,OAA2C,SAAAC,GAAA,OAAAA,IAAYb,IACnDR,EAAAA,SAAsCM,oBAClCgB,iBAAJC,YAAAL,IAFJf,EAAAqB,cAAAhB,KAKAN,qBAQR,IAAAuB,WAAMrB,SAAmBC,eAAzB,cACAL,WAAAA,iBAAsB,mBAAI,WAAA1B,SAAI8B,iBAAmBM,mBAAvBH,QAAA,SAAAmB,GAAA,OAAAA,EAAAC,UAAAL,OAAA,YAA1B,IAAAM,EAAAhB,MAAAC,KAAAvC,SAAAuD,iBAAA,mBAAAC,QAAAxD,SAAAC,cAAA,0BACA0B,EAAmBG,SAAYyB,iBAA/B,mBAAAD,GACHG,GAAAA,EAAAJ,UAAAjB,IAAA","file":"cars_edit.min.js","sourcesContent":["const mainImgInput = document.querySelector('input[name=\"imagen\"]');\r\nconst fileStatus = document.getElementById('file-status');\r\nconst btnRemoveMain = document.getElementById('btnRemoveMain');\r\nconst clearImgCheckbox = document.getElementById('imagen-clear_id');\r\n\r\nif (mainImgInput) {\r\n    mainImgInput.addEventListener('change', function (e) {\r\n        if (this.files && this.files[0]) {\r\n            const newImgUrl = URL.createObjectURL(this.files[0]);\r\n            const mainItem = document.getElementById('mainItem');\r\n            const thumbContainer = document.getElementById('thumbContainer');\r\n\r\n            fileStatus.innerHTML = `<i class=\"bi bi-arrow-repeat\"></i> Nueva: ${this.files[0].name}`;\r\n            fileStatus.className = \"small fw-bold text-primary\";\r\n            btnRemoveMain.style.display = \"block\";\r\n            if (clearImgCheckbox) clearImgCheckbox.checked = false;\r\n\r\n            mainItem.innerHTML = `<img src=\"${newImgUrl}\" class=\"d-block w-100\" id=\"mainImgPreview\" style=\"height: 380px; object-fit: cover;\">`;\r\n\r\n            let existingMainThumb = document.getElementById('mainThumb');\r\n            if (existingMainThumb) {\r\n                existingMainThumb.src = newImgUrl;\r\n                existingMainThumb.style.display = \"block\";\r\n            } else {\r\n                const newThumb = document.createElement('img');\r\n                newThumb.id = \"mainThumb\";\r\n                newThumb.src = newImgUrl;\r\n                newThumb.className = \"rounded border shadow-sm thumb-selector active\";\r\n                newThumb.style = \"width: 70px; height: 50px; object-fit: cover; cursor: pointer;\";\r\n                newThumb.setAttribute('data-bs-target', '#carGallery');\r\n                newThumb.setAttribute('data-bs-slide-to', \"0\");\r\n                thumbContainer.prepend(newThumb);\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nif (btnRemoveMain) {\r\n    btnRemoveMain.addEventListener('click', function () {\r\n        mainImgInput.value = \"\";\r\n        if (clearImgCheckbox) clearImgCheckbox.checked = true;\r\n        fileStatus.innerHTML = `<i class=\"bi bi-x-circle-fill\"></i> Marcada para eliminar`;\r\n        fileStatus.className = \"small fw-bold text-danger\";\r\n        document.getElementById('mainItem').innerHTML = `<div class=\"bg-light d-flex justify-content-center align-items-center\" style=\"height: 380px;\"><i class=\"bi bi-camera fs-1 text-secondary opacity-50\"></i></div>`;\r\n        if (document.getElementById('mainThumb')) document.getElementById('mainThumb').style.display = \"none\";\r\n        this.style.display = \"none\";\r\n    });\r\n}\r\n\r\nlet selectedFiles = [];\r\nconst imageInput = document.getElementById('imageInput');\r\nconst previewContainer = document.getElementById('previewContainer');\r\n\r\nimageInput.addEventListener('change', function (e) {\r\n    const files = Array.from(e.target.files);\r\n    files.forEach(file => {\r\n        selectedFiles.push(file);\r\n        const reader = new FileReader();\r\n        reader.onload = function (event) {\r\n            const div = document.createElement('div');\r\n            div.className = 'new-preview-item';\r\n            div.innerHTML = `<img src=\"${event.target.result}\" class=\"rounded border shadow-sm w-100 h-100\" style=\"object-fit: cover;\"><div class=\"remove-new\"><i class=\"bi bi-trash\"></i></div>`;\r\n            div.querySelector('.remove-new').onclick = function () {\r\n                selectedFiles = selectedFiles.filter(f => f !== file);\r\n                div.remove();\r\n                updateInputFiles();\r\n            };\r\n            previewContainer.appendChild(div);\r\n        }\r\n        reader.readAsDataURL(file);\r\n    });\r\n    updateInputFiles();\r\n});\r\n\r\nfunction updateInputFiles() {\r\n    const dataTransfer = new DataTransfer();\r\n    selectedFiles.forEach(file => dataTransfer.items.add(file));\r\n    imageInput.files = dataTransfer.files;\r\n}\r\n\r\nvar carGallery = document.getElementById('carGallery');\r\ncarGallery.addEventListener('slid.bs.carousel', function () {\r\n    document.querySelectorAll('.thumb-selector').forEach(el => el.classList.remove('active'));\r\n    let activeIdx = Array.from(document.querySelectorAll('.carousel-item')).indexOf(document.querySelector('.carousel-item.active'));\r\n    const targetThumb = document.querySelectorAll('.thumb-selector')[activeIdx];\r\n    if (targetThumb) targetThumb.classList.add('active');\r\n});"]}