{"version":3,"sources":["cars_edit.js"],"names":["mainImgInput","document","querySelector","fileStatus","getElementById","btnRemoveMain","clearImgCheckbox","addEventListener","e","files","newImgUrl","URL","createObjectURL","mainItem","thumbContainer","innerHTML","name","className","style","display","checked","existingMainThumb","src","newThumb","createElement","id","setAttribute","prepend","value","selectedFiles","imageInput","previewContainer","Array","from","target","forEach","file","push","reader","FileReader","onload","event","div","result","onclick","filter","f","remove","updateInputFiles","appendChild","readAsDataURL","dataTransfer","DataTransfer","items","add","carGallery","querySelectorAll","el","classList","activeIdx","indexOf","targetThumb"],"mappings":"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","sourcesContent":["const mainImgInput = document.querySelector('input[name=\"imagen\"]');\r\nconst fileStatus = document.getElementById('file-status');\r\nconst btnRemoveMain = document.getElementById('btnRemoveMain');\r\nconst clearImgCheckbox = document.getElementById('imagen-clear_id');\r\n\r\nif (mainImgInput) {\r\n    mainImgInput.addEventListener('change', function (e) {\r\n        if (this.files && this.files[0]) {\r\n            const newImgUrl = URL.createObjectURL(this.files[0]);\r\n            const mainItem = document.getElementById('mainItem');\r\n            const thumbContainer = document.getElementById('thumbContainer');\r\n\r\n            fileStatus.innerHTML = `<i class=\"bi bi-arrow-repeat\"></i> Nueva: ${this.files[0].name}`;\r\n            fileStatus.className = \"small fw-bold text-primary\";\r\n            btnRemoveMain.style.display = \"block\";\r\n            if (clearImgCheckbox) clearImgCheckbox.checked = false;\r\n\r\n            mainItem.innerHTML = `<img src=\"${newImgUrl}\" class=\"d-block w-100\" id=\"mainImgPreview\" style=\"height: 380px; object-fit: cover;\">`;\r\n\r\n            let existingMainThumb = document.getElementById('mainThumb');\r\n            if (existingMainThumb) {\r\n                existingMainThumb.src = newImgUrl;\r\n                existingMainThumb.style.display = \"block\";\r\n            } else {\r\n                const newThumb = document.createElement('img');\r\n                newThumb.id = \"mainThumb\";\r\n                newThumb.src = newImgUrl;\r\n                newThumb.className = \"rounded border shadow-sm thumb-selector active\";\r\n                newThumb.style = \"width: 70px; height: 50px; object-fit: cover; cursor: pointer;\";\r\n                newThumb.setAttribute('data-bs-target', '#carGallery');\r\n                newThumb.setAttribute('data-bs-slide-to', \"0\");\r\n                thumbContainer.prepend(newThumb);\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nif (btnRemoveMain) {\r\n    btnRemoveMain.addEventListener('click', function () {\r\n        mainImgInput.value = \"\";\r\n        if (clearImgCheckbox) clearImgCheckbox.checked = true;\r\n        fileStatus.innerHTML = `<i class=\"bi bi-x-circle-fill\"></i> Marcada para eliminar`;\r\n        fileStatus.className = \"small fw-bold text-danger\";\r\n        document.getElementById('mainItem').innerHTML = `<div class=\"bg-light d-flex justify-content-center align-items-center\" style=\"height: 380px;\"><i class=\"bi bi-camera fs-1 text-secondary opacity-50\"></i></div>`;\r\n        if (document.getElementById('mainThumb')) document.getElementById('mainThumb').style.display = \"none\";\r\n        this.style.display = \"none\";\r\n    });\r\n}\r\n\r\nlet selectedFiles = [];\r\nconst imageInput = document.getElementById('imageInput');\r\nconst previewContainer = document.getElementById('previewContainer');\r\n\r\nimageInput.addEventListener('change', function (e) {\r\n    const files = Array.from(e.target.files);\r\n    files.forEach(file => {\r\n        selectedFiles.push(file);\r\n        const reader = new FileReader();\r\n        reader.onload = function (event) {\r\n            const div = document.createElement('div');\r\n            div.className = 'new-preview-item';\r\n            div.innerHTML = `<img src=\"${event.target.result}\" class=\"rounded border shadow-sm w-100 h-100\" style=\"object-fit: cover;\"><div class=\"remove-new\"><i class=\"bi bi-trash\"></i></div>`;\r\n            div.querySelector('.remove-new').onclick = function () {\r\n                selectedFiles = selectedFiles.filter(f => f !== file);\r\n                div.remove();\r\n                updateInputFiles();\r\n            };\r\n            previewContainer.appendChild(div);\r\n        }\r\n        reader.readAsDataURL(file);\r\n    });\r\n    updateInputFiles();\r\n});\r\n\r\nfunction updateInputFiles() {\r\n    const dataTransfer = new DataTransfer();\r\n    selectedFiles.forEach(file => dataTransfer.items.add(file));\r\n    imageInput.files = dataTransfer.files;\r\n}\r\n\r\nvar carGallery = document.getElementById('carGallery');\r\ncarGallery.addEventListener('slid.bs.carousel', function () {\r\n    document.querySelectorAll('.thumb-selector').forEach(el => el.classList.remove('active'));\r\n    let activeIdx = Array.from(document.querySelectorAll('.carousel-item')).indexOf(document.querySelector('.carousel-item.active'));\r\n    const targetThumb = document.querySelectorAll('.thumb-selector')[activeIdx];\r\n    if (targetThumb) targetThumb.classList.add('active');\r\n});"],"file":"cars_edit.dev.js"}