{"version":3,"sources":["galeria_cars_create.js"],"names":["multiUpload","document","getElementById","previewContainer","formsetInputs","querySelectorAll","occupiedIndices","Array","fill","addEventListener","e","files","from","target","forEach","file","freeIndex","findIndex","status","renderPreview","dt","DataTransfer","items","add","value","index","reader","FileReader","onload","div","createElement","className","innerHTML","result","appendChild","readAsDataURL","removeFoto","element","querySelector","remove"],"mappings":";;AAAA,IAAMA,WAAW,GAAGC,QAAQ,CAACC,cAAT,CAAwB,cAAxB,CAApB;AACA,IAAMC,gBAAgB,GAAGF,QAAQ,CAACC,cAAT,CAAwB,mBAAxB,CAAzB;AACA,IAAME,aAAa,GAAGH,QAAQ,CAACI,gBAAT,CAA0B,wBAA1B,CAAtB;AACA,IAAIC,eAAe,GAAG,IAAIC,KAAJ,CAAU,EAAV,EAAcC,IAAd,CAAmB,KAAnB,CAAtB;AAEAR,WAAW,CAACS,gBAAZ,CAA6B,QAA7B,EAAuC,UAAUC,CAAV,EAAa;AAChD,MAAMC,KAAK,GAAGJ,KAAK,CAACK,IAAN,CAAWF,CAAC,CAACG,MAAF,CAASF,KAApB,CAAd;AACAA,EAAAA,KAAK,CAACG,OAAN,CAAc,UAAAC,IAAI,EAAI;AAClB,QAAMC,SAAS,GAAGV,eAAe,CAACW,SAAhB,CAA0B,UAAAC,MAAM;AAAA,aAAIA,MAAM,KAAK,KAAf;AAAA,KAAhC,CAAlB;;AACA,QAAIF,SAAS,KAAK,CAAC,CAAf,IAAoBA,SAAS,GAAG,EAApC,EAAwC;AACpCV,MAAAA,eAAe,CAACU,SAAD,CAAf,GAA6B,IAA7B;AACAG,MAAAA,aAAa,CAACJ,IAAD,EAAOC,SAAP,CAAb;AACA,UAAMI,EAAE,GAAG,IAAIC,YAAJ,EAAX;AACAD,MAAAA,EAAE,CAACE,KAAH,CAASC,GAAT,CAAaR,IAAb;AACAX,MAAAA,aAAa,CAACY,SAAD,CAAb,CAAyBL,KAAzB,GAAiCS,EAAE,CAACT,KAApC;AACH;AACJ,GATD;AAUA,OAAKa,KAAL,GAAa,EAAb;AACH,CAbD;;AAeA,SAASL,aAAT,CAAuBJ,IAAvB,EAA6BU,KAA7B,EAAoC;AAChC,MAAMC,MAAM,GAAG,IAAIC,UAAJ,EAAf;;AACAD,EAAAA,MAAM,CAACE,MAAP,GAAgB,UAAUlB,CAAV,EAAa;AACzB,QAAMmB,GAAG,GAAG5B,QAAQ,CAAC6B,aAAT,CAAuB,KAAvB,CAAZ;AACAD,IAAAA,GAAG,CAACE,SAAJ,kDAAwDN,KAAxD;AACAI,IAAAA,GAAG,CAACG,SAAJ,8GAEwBtB,CAAC,CAACG,MAAF,CAASoB,MAFjC,yGAGwDR,KAHxD;AASAtB,IAAAA,gBAAgB,CAAC+B,WAAjB,CAA6BL,GAA7B;AACH,GAbD;;AAcAH,EAAAA,MAAM,CAACS,aAAP,CAAqBpB,IAArB;AACH;;AAED,SAASqB,UAAT,CAAoBX,KAApB,EAA2B;AACvB,MAAMY,OAAO,GAAGpC,QAAQ,CAACqC,aAAT,yBAAwCb,KAAxC,EAAhB;AACA,MAAIY,OAAJ,EAAaA,OAAO,CAACE,MAAR;AACbnC,EAAAA,aAAa,CAACqB,KAAD,CAAb,CAAqBD,KAArB,GAA6B,EAA7B;AACAlB,EAAAA,eAAe,CAACmB,KAAD,CAAf,GAAyB,KAAzB;AACH","sourcesContent":["const multiUpload = document.getElementById('multi_upload');\r\nconst previewContainer = document.getElementById('preview-container');\r\nconst formsetInputs = document.querySelectorAll('input[name$=\"-imagen\"]');\r\nlet occupiedIndices = new Array(10).fill(false);\r\n\r\nmultiUpload.addEventListener('change', function (e) {\r\n    const files = Array.from(e.target.files);\r\n    files.forEach(file => {\r\n        const freeIndex = occupiedIndices.findIndex(status => status === false);\r\n        if (freeIndex !== -1 && freeIndex < 10) {\r\n            occupiedIndices[freeIndex] = true;\r\n            renderPreview(file, freeIndex);\r\n            const dt = new DataTransfer();\r\n            dt.items.add(file);\r\n            formsetInputs[freeIndex].files = dt.files;\r\n        }\r\n    });\r\n    this.value = \"\";\r\n});\r\n\r\nfunction renderPreview(file, index) {\r\n    const reader = new FileReader();\r\n    reader.onload = function (e) {\r\n        const div = document.createElement('div');\r\n        div.className = `col-6 col-md-4 col-lg-3 preview-item-${index}`;\r\n        div.innerHTML = `\r\n                <div class=\"preview-card position-relative\">\r\n                    <img src=\"${e.target.result}\" class=\"img-preview\">\r\n                    <button type=\"button\" onclick=\"removeFoto(${index})\" \r\n                            class=\"btn-delete position-absolute top-0 end-0 m-1 shadow-sm\">\r\n                        &times;\r\n                    </button>\r\n                </div>\r\n            `;\r\n        previewContainer.appendChild(div);\r\n    }\r\n    reader.readAsDataURL(file);\r\n}\r\n\r\nfunction removeFoto(index) {\r\n    const element = document.querySelector(`.preview-item-${index}`);\r\n    if (element) element.remove();\r\n    formsetInputs[index].value = \"\";\r\n    occupiedIndices[index] = false;\r\n}"],"file":"galeria_cars_create.dev.js"}