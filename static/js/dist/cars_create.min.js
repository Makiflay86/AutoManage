"use strict";var selectedFiles=[],mainFile=null,mainInput=document.querySelector('input[name="imagen"]'),imageInput=document.getElementById("imageInput"),previewContainer=document.getElementById("previewContainer"),thumbContainer=document.getElementById("thumbContainer"),carouselInner=document.getElementById("mainCarouselInner"),formsetInputs=document.querySelectorAll('#hiddenFormset input[type="file"]');function syncFormset(){formsetInputs.forEach(function(e,t){var n=new DataTransfer;selectedFiles[t]&&n.items.add(selectedFiles[t]),e.files=n.files})}function refreshVisuals(){carouselInner.innerHTML="",thumbContainer.innerHTML="";var e=[];mainFile&&e.push(mainFile),0!==(e=e.concat(selectedFiles)).length?e.forEach(function(e,t){var n=URL.createObjectURL(e),r=document.createElement("div");r.className="carousel-item ".concat(0===t?"active":""),r.innerHTML='<img src="'.concat(n,'" class="d-block w-100" style="height: 380px; object-fit: cover;">'),carouselInner.appendChild(r);var c=document.createElement("img");c.src=n,c.className="thumb-selector ".concat(0===t?"active":""),c.setAttribute("data-bs-target","#carGallery"),c.setAttribute("data-bs-slide-to",t),thumbContainer.appendChild(c)}):carouselInner.innerHTML='<div class="carousel-item active"><div class="bg-light d-flex justify-content-center align-items-center" style="height: 380px;"><i class="bi bi-camera fs-1 text-secondary opacity-50"></i></div></div>'}mainInput.addEventListener("change",function(e){mainFile=e.target.files[0],refreshVisuals()}),imageInput.addEventListener("change",function(e){Array.from(e.target.files).forEach(function(t){if(selectedFiles.length<formsetInputs.length){selectedFiles.push(t);var e=document.createElement("div");e.className="new-preview-item",e.innerHTML='<img src="'.concat(URL.createObjectURL(t),'" class="rounded border w-100 h-100" style="object-fit: cover;"><div class="remove-new"><i class="bi bi-trash"></i></div>'),e.querySelector(".remove-new").onclick=function(){selectedFiles=selectedFiles.filter(function(e){return e!==t}),e.remove(),syncFormset(),refreshVisuals()},previewContainer.appendChild(e)}}),syncFormset(),refreshVisuals()}),document.getElementById("carGallery").addEventListener("slid.bs.carousel",function(){document.querySelectorAll(".thumb-selector").forEach(function(e){return e.classList.remove("active")});var e=Array.from(document.querySelectorAll(".carousel-item")).indexOf(document.querySelector(".carousel-item.active"));document.querySelector('.thumb-selector[data-bs-slide-to="'.concat(e,'"]'))&&document.querySelector('.thumb-selector[data-bs-slide-to="'.concat(e,'"]')).classList.add("active")});
//# sourceMappingURL=cars_create.min.js.map
