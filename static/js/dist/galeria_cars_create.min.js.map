{"version":3,"sources":["galeria_cars_create.js"],"names":["multiUpload","document","getElementById","previewContainer","renderPreview","file","index","value","FileReader","reader","onload","e","div","createElement","concat","innerHTML","target","result","readAsDataURL","element","formsetInputs","querySelector","occupiedIndices","remove","Array","fill","addEventListener","files","forEach","findIndex","status","freeIndex","dt","DataTransfer","add","items"],"mappings":"aAAA,IAAMA,YAAcC,SAASC,eAAe,gBACtCC,iBAAmBF,SAASC,eAAe,qBAD3CF,cAAcC,SAASC,iBAAe,0BACtCC,gBAAgB,IAAGF,MAASC,IAAAA,MAAAA,GAe7B,SATDE,cAAAC,EAAAC,GAUA,IAAKC,EAAL,IAAAC,WAZJC,EAAAC,OAAA,SAAAC,GAkBQ,IAAMC,EAAMX,SAASY,cAAc,OAH3CD,EAASR,UAAT,wCAAAU,OAAoCR,GAC1BG,EAAMM,UAANN,iGAAAA,OACuBE,EAAAK,OAAAC,OADvBR,0FAAAA,OAEFH,EAFEG,0MAeAN,iBAAeE,YAArBO,IAAAH,EAAOS,cAAcb,GAKrB,SAAIc,WAASA,GACbC,IAAAA,EAAcd,SAAde,cAAcf,iBAAAA,OAAdA,IACAgB,GAAeH,EAAfI,SACHH,cAAAd,GAAAC,MAAA,GADGe,gBAAgBhB,IAAS,EAxC7BN,YAAIsB,iBAAsBE,SAAUC,SAApCd,GAEYe,MAAAA,KAAiBf,EAAAK,OAA7BW,OACUA,QAAQH,SAAAA,GACRI,IAAAA,EAAQvB,gBAAQwB,UAAA,SAAAC,GAAA,OAAA,IAAAA,IACZC,IAAYT,IAAZS,GAAYT,EAAgBO,GAAU,CAAMP,gBAAeS,IAAf,EAAlD3B,cAAAC,EAAA0B,GAII,IAAMC,EAAK,IAAIC,aAHfF,EAAAA,MAASG,IAAT7B,GACAiB,cAAgBS,GAAaJ,MAA7BK,EAAAL,SAGAK,KAAGG,MAAMD","file":"galeria_cars_create.min.js","sourcesContent":["const multiUpload = document.getElementById('multi_upload');\r\nconst previewContainer = document.getElementById('preview-container');\r\nconst formsetInputs = document.querySelectorAll('input[name$=\"-imagen\"]');\r\nlet occupiedIndices = new Array(10).fill(false);\r\n\r\nmultiUpload.addEventListener('change', function (e) {\r\n    const files = Array.from(e.target.files);\r\n    files.forEach(file => {\r\n        const freeIndex = occupiedIndices.findIndex(status => status === false);\r\n        if (freeIndex !== -1 && freeIndex < 10) {\r\n            occupiedIndices[freeIndex] = true;\r\n            renderPreview(file, freeIndex);\r\n            const dt = new DataTransfer();\r\n            dt.items.add(file);\r\n            formsetInputs[freeIndex].files = dt.files;\r\n        }\r\n    });\r\n    this.value = \"\";\r\n});\r\n\r\nfunction renderPreview(file, index) {\r\n    const reader = new FileReader();\r\n    reader.onload = function (e) {\r\n        const div = document.createElement('div');\r\n        div.className = `col-6 col-md-4 col-lg-3 preview-item-${index}`;\r\n        div.innerHTML = `\r\n                <div class=\"preview-card position-relative\">\r\n                    <img src=\"${e.target.result}\" class=\"img-preview\">\r\n                    <button type=\"button\" onclick=\"removeFoto(${index})\" \r\n                            class=\"btn-delete position-absolute top-0 end-0 m-1 shadow-sm\">\r\n                        &times;\r\n                    </button>\r\n                </div>\r\n            `;\r\n        previewContainer.appendChild(div);\r\n    }\r\n    reader.readAsDataURL(file);\r\n}\r\n\r\nfunction removeFoto(index) {\r\n    const element = document.querySelector(`.preview-item-${index}`);\r\n    if (element) element.remove();\r\n    formsetInputs[index].value = \"\";\r\n    occupiedIndices[index] = false;\r\n}"]}